<!-- Form -->
<div class="patient-form-container">
  <%= form_with model: @patient, local: true, class: "patient-form", id: "edit-patient-form-#{Time.current.to_i}", data: { turbo: false } do |form| %>
    <% if @patient.errors.any? %>
      <div class="form-errors">
        <h3>Por favor, corrija os seguintes erros:</h3>
        <ul>
          <% @patient.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-row">
      <div class="form-group">
        <%= form.label :name, "Nome", class: "form-label" %>
        <%= form.text_field :name, class: "form-control", required: true %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= form.label :email, "Email", class: "form-label" %>
        <%= form.email_field :email, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :phone, "Telefone", class: "form-label" %>
        <%= form.text_field :phone, class: "form-control" %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= form.label :birth_date, "Data de Nascimento", class: "form-label" %>
        <%= form.date_field :birth_date, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :status, "Status", class: "form-label" %>
        <%= form.select :status, 
            options_for_select([
              ['Ativo', 'active'],
              ['Encerrado', 'closed']
            ], @patient.status),
            {},
            { class: "form-control" } %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group full-width">
        <%= form.label :notes, "Anotações", class: "form-label" %>
        <%= form.text_area :notes, 
            placeholder: "Anotações sobre o paciente...",
            rows: 4,
            class: "form-control" %>
      </div>
    </div>

    <div class="form-actions">
      <%= link_to "Cancelar", patient_path(@patient), class: "btn-secondary" %>
      <%= link_to patient_path(@patient),
          class: "btn-danger",
          data: { 
            turbo_method: :delete,
            confirm: 'Tem certeza que deseja excluir este paciente? Esta ação não pode ser desfeita.'
          } do %>
        <svg viewBox="0 0 24 24" fill="currentColor" style="width: 16px; height: 16px; margin-right: 8px;">
          <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
        </svg>
        Excluir Paciente
      <% end %>
      <%= form.submit "Salvar Alterações", class: "btn-primary" %>
    </div>
  <% end %>
</div>
