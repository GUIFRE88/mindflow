<!-- Header -->
<div class="patients-header">
  <div class="header-content">
    <h1 class="page-title">Pacientes</h1>
    <div class="header-actions">
      <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
      </svg>
      <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
    </div>
  </div>
  <%= link_to new_patient_path, class: "btn-new-patient" do %>
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
    </svg>
    Novo Paciente
  <% end %>
</div>

<!-- Search and Filters -->
<div class="patients-filters">
  <%= form_with url: patients_path, method: :get, local: true, class: "search-form" do |f| %>
    <div class="search-input-group">
      <svg class="search-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <%= f.text_field :search, 
                       placeholder: "Buscar pacientes...", 
                       value: params[:search],
                       class: "search-input" %>
    </div>
    
    <div class="filter-group">
      <%= f.select :status, 
                   options_for_select([
                     ['Todos os status', ''],
                     ['Ativo', 'active'],
                     ['Encerrado', 'closed']
                   ], params[:status]),
                   {},
                   { class: "status-filter" } %>
    </div>
    
    <%= f.submit "Buscar", class: "btn-search" %>
  <% end %>
</div>

<!-- Patients Table -->
<div class="patients-table-container">
  <table class="patients-table">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Telefone</th>
        <th>Status</th>
        <th>Próxima Sessão</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% if @patients.any? %>
        <% @patients.each do |patient| %>
          <tr class="patient-row">
            <td class="patient-info">
              <div class="patient-name"><%= patient.name %></div>
              <div class="patient-email"><%= patient.email %></div>
            </td>
            <td class="patient-phone">
              <%= patient.phone %>
            </td>
            <td class="patient-status">
              <span class="status-badge <%= patient.status %>">
                <%= patient.status == 'active' ? 'Ativo' : 'Encerrado' %>
              </span>
            </td>
            <td class="next-session">
              <!-- Placeholder para próxima sessão -->
              -
            </td>
            <td class="patient-actions">
              <%= link_to "Ver Perfil", patient_path(patient), class: "action-link" %>
            </td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="5" class="no-patients">
            <div class="empty-state">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <p>Nenhum paciente encontrado</p>
              <%= link_to "Adicionar primeiro paciente", new_patient_path, class: "btn-primary" %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
